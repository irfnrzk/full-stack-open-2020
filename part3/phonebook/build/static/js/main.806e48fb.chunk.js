(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(15),o=n.n(c),s=n(3),u=function(e){var t=e.newSearch,n=e.handleSearchChange;return Object(a.jsxs)("div",{children:["filter shown with",Object(a.jsx)("input",{value:t,onChange:n})]})},i=(n(6),function(e){var t=e.message,n=e.styleClass;return null===t?null:Object(a.jsx)("div",{className:n,children:t})}),d=function(e){var t=e.addName,n=e.newName,r=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsxs)("div",{children:["name:",Object(a.jsx)("input",{value:n,onChange:r})]}),Object(a.jsxs)("div",{children:["number:",Object(a.jsx)("input",{value:c,onChange:o})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var t=e.newSearch,n=e.persons,r=e.handleDeletePerson;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("ul",{children:""===t?n.map((function(e){return Object(a.jsxs)("li",{children:[e.name," ",e.number,Object(a.jsx)("button",{"data-id":e.id,"data-name":e.name,onClick:r,children:"delete"})]},e.id)})):n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(a.jsxs)("li",{children:[e.name," ",e.number,Object(a.jsx)("button",{"data-id":e.id,"data-name":e.name,onClick:r,children:"delete"})]},e.id)}))})})},h=n(4),b=n.n(h),j="/api/persons",f=function(){return b.a.get(j).then((function(e){return e.data}))},m=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e,t){return b.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},v=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),h=Object(s.a)(o,2),b=h[0],j=h[1],v=Object(r.useState)(""),x=Object(s.a)(v,2),w=x[0],g=x[1],C=Object(r.useState)(""),S=Object(s.a)(C,2),N=S[0],k=S[1],y=Object(r.useState)("some error happened..."),D=Object(s.a)(y,2),T=D[0],L=D[1],P=Object(r.useState)(!1),E=Object(s.a)(P,2),F=E[0],I=E[1],J=Object(r.useState)(""),A=Object(s.a)(J,2),B=A[0],U=A[1];Object(r.useEffect)((function(){f().then((function(e){c(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),F&&Object(a.jsx)(i,{message:T,styleClass:B}),Object(a.jsx)(u,{newSearch:N,handleSearchChange:function(e){k(e.target.value),console.log(n.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})))}}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsx)(d,{addName:function(e){e.preventDefault();var t={name:b,number:w};if(n.filter((function(e){return e.name===b}))[0]){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var a=n.filter((function(e){return e.name===b}))[0].id;O(a,t).then((function(e){c(n.map((function(t){return t.id!==a?t:e}))),j(""),g(""),L("Updated ".concat(b,"'s phone number")),U("success"),I(!0),setTimeout((function(){I(!1)}),2e3)})).catch((function(e){L(500===e.response.status?e.response.data:400===e.response.status?e.response.data.error:e.response.data),U("error"),I(!0),setTimeout((function(){I(!1)}),2e3)}))}}else m(t).then((function(e){c(n.concat(e)),j(""),g(""),L("Added ".concat(b)),U("success"),I(!0),setTimeout((function(){I(!1)}),2e3)})).catch((function(e){L(500===e.response.status?e.response.data:400===e.response.status?e.response.data.error:e.response.data),U("error"),I(!0),setTimeout((function(){I(!1)}),2e3)}))},newName:b,handleNameChange:function(e){j(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(l,{persons:n,newSearch:N,handleDeletePerson:function(e){var t=e.target.attributes["data-id"].value,a=e.target.attributes["data-name"].value;e.preventDefault(),window.confirm("Delete ".concat(e.target.attributes["data-name"].value))&&p(t).then((function(e){c(n.filter((function(e){return e.id!==t})))})).catch((function(e){L("Information of ".concat(a," has alread been removed from server")),U("error"),I(!0),setTimeout((function(){I(!1)}),2e3)}))}})]})};o.a.render(Object(a.jsx)(v,{}),document.getElementById("root"))},6:function(e,t,n){}},[[38,1,2]]]);
//# sourceMappingURL=main.806e48fb.chunk.js.map