(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(1),r=t(15),u=t.n(r),o=t(3),i=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(a.jsxs)("div",{children:["filter shown with",Object(a.jsx)("input",{value:n,onChange:t})]})},s=(t(6),function(e){var n=e.message,t=e.styleClass;return null===n?null:Object(a.jsx)("div",{className:t,children:n})}),d=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,r=e.newNumber,u=e.handleNumberChange;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name:",Object(a.jsx)("input",{value:t,onChange:c})]}),Object(a.jsxs)("div",{children:["number:",Object(a.jsx)("input",{value:r,onChange:u})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var n=e.newSearch,t=e.persons,c=e.handleDeletePerson;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("ul",{children:""===n?t.map((function(e){return Object(a.jsxs)("li",{children:[e.name," ",e.number,Object(a.jsx)("button",{"data-id":e.id,"data-name":e.name,onClick:c,children:"delete"})]},e.id)})):t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(a.jsxs)("li",{children:[e.name," ",e.number,Object(a.jsx)("button",{"data-id":e.id,"data-name":e.name,onClick:c,children:"delete"})]},e.id)}))})})},b=t(4),h=t.n(b),j="/api/persons",f=function(){return h.a.get(j).then((function(e){return e.data}))},m=function(e){return h.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],u=Object(c.useState)(""),b=Object(o.a)(u,2),h=b[0],j=b[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),w=x[0],g=x[1],C=Object(c.useState)(""),S=Object(o.a)(C,2),N=S[0],k=S[1],y=Object(c.useState)("some error happened..."),D=Object(o.a)(y,2),L=D[0],I=D[1],P=Object(c.useState)(!1),T=Object(o.a)(P,2),E=T[0],F=T[1],J=Object(c.useState)(""),A=Object(o.a)(J,2),B=A[0],U=A[1];Object(c.useEffect)((function(){f().then((function(e){r(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),E&&Object(a.jsx)(s,{message:L,styleClass:B}),Object(a.jsx)(i,{newSearch:N,handleSearchChange:function(e){k(e.target.value),console.log(t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})))}}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsx)(d,{addName:function(e){e.preventDefault();var n={name:h,number:w};if(t.filter((function(e){return e.name===h}))[0]){if(window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))){var a=t.filter((function(e){return e.name===h}))[0].id;O(a,n).then((function(e){r(t.map((function(n){return n.id!==a?n:e}))),j(""),g(""),I("Updated ".concat(h,"'s phone number")),U("success"),F(!0),setTimeout((function(){F(!1)}),2e3)}))}}else m(n).then((function(e){r(t.concat(e)),j(""),g(""),I("Added ".concat(h)),U("success"),F(!0),setTimeout((function(){F(!1)}),2e3)}))},newName:h,handleNameChange:function(e){j(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(l,{persons:t,newSearch:N,handleDeletePerson:function(e){var n=parseInt(e.target.attributes["data-id"].value),a=e.target.attributes["data-name"].value;e.preventDefault(),window.confirm("Delete ".concat(e.target.attributes["data-name"].value))&&p(n).then((function(e){r(t.filter((function(e){return e.id!==n})))})).catch((function(e){I("Information of ".concat(a," has alread been removed from server")),U("error"),F(!0),setTimeout((function(){F(!1)}),2e3)}))}})]})};u.a.render(Object(a.jsx)(v,{}),document.getElementById("root"))},6:function(e,n,t){}},[[38,1,2]]]);
//# sourceMappingURL=main.c91634af.chunk.js.map